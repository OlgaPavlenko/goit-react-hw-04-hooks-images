(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{31:function(t,e,a){},73:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a(0),c=a.n(r),s=a(8),o=a.n(s),i=(a(29),a(30),a(31),a(4)),u=a(5),l=a(7),h=a(6),m=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={searchQuery:""},t.changeInput=function(e){t.setState({searchQuery:e.target.value})},t.handleSubmit=function(e){e.preventDefault(),""!==t.state.searchQuery.trim()&&t.props.onSubmit(t.state.searchQuery)},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this.state.searchQuery;return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(n.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0438 \u0444\u043e\u0442\u043e",value:t,onChange:this.changeInput})]})})}}]),a}(r.Component),p=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).checkEvent=function(e){"Escape"!==e.key&&e.target!==e.currentTarget||t.props.toggleModal({status:!1})},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.checkEvent)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.checkEvent)}},{key:"render",value:function(){var t=this.props,e=t.src,a=t.alt;return Object(n.jsx)("div",{className:"Overlay",onClick:this.checkEvent,children:Object(n.jsx)("div",{className:"Modal",children:Object(n.jsx)("img",{src:e,alt:a})})})}}]),a}(r.Component),g=a(9),j=a(12),b=(a(32),a(21)),d=a.n(b),f=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsx)(d.a,{className:"loader",type:"Circles",color:"#3f51b5",height:80,width:80,timeout:3e3})}}]),a}(r.Component);function v(t){var e=t.onClick;return Object(n.jsx)("div",{className:"Button_container",children:Object(n.jsx)("button",{className:"Button Button_loadmore",type:"button",onClick:e,children:"Load more"})})}var y=a(11),O=a.n(y),k=a(22),x=a(23),S=a.n(x),w="19023232-35be833f55f428d8b0eb36710";function I(){return(I=Object(k.a)(O.a.mark((function t(e,a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",S.a.get("https://pixabay.com/api/?q=".concat(e,"&page=").concat(a,"&key=").concat(w,"&image_type=photo&orientation=horizontal&per_page=15")).then((function(t){return 200===t.status?t.data:Promise.reject(new Error("Images are not found."))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(t){var e=t.image;return Object(n.jsx)("li",{className:"ImageGalleryItem",children:Object(n.jsx)("img",{src:e.webformatURL,alt:e.tags,"data-imageurl":e.largeImageURL,className:"ImageGalleryItem-image"})})}var C="idle",M="pending",Q="resolved",E="rejected",B=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={images:[],totalHits:0,page:1,error:null,emptyNotify:!1,showButton:!1,status:C},t.onButtonMoreClick=function(){t.setState((function(t){return{page:t.page+1}}))},t.checkButtonAndNotify=function(){var e=t.state,a=e.totalHits;a>e.images.length?t.setState({showButton:!0}):t.setState({showButton:!1}),a?t.setState({emptyNotify:!1}):t.setState({emptyNotify:!0})},t.checkEvent=function(e){var a=t.props.toggleModal;e.target!==e.currentTarget&&a({status:!0,src:e.target.dataset.imageurl,alt:e.target.alt})},t}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(t,e){if(t.searchQuery!==this.props.searchQuery)return this.setState({status:M,page:1}),void this.searchImages();e.page===this.state.page||this.searchImages()}},{key:"searchImages",value:function(){var t=this,e=this.state.page;(function(t,e){return I.apply(this,arguments)})(this.props.searchQuery,e).then((function(a){1===e?t.setState({totalHits:a.totalHits,images:a.hits,status:Q}):(t.setState((function(t){return{images:[].concat(Object(j.a)(t.images),Object(j.a)(a.hits)),status:Q}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})),t.checkButtonAndNotify()})).catch((function(e){return t.setState({error:e,status:E})})).finally((function(){return t.setState({status:C})}))}},{key:"render",value:function(){var t=this.state,e=t.images,a=t.error,r=t.status,c=t.totalHits;return r===M?Object(n.jsx)(f,{}):(r===E&&g.b.error(a.message,{toastId:"id"}),r===Q||r===C?(e.length||r===C||g.b.info("\u041d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043f\u043e \u0412\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443",{toastId:"newId"}),Object(n.jsxs)(n.Fragment,{children:["if(images)",Object(n.jsx)("ul",{className:"ImageGallery",onClick:this.checkEvent,children:e.map((function(t){return Object(n.jsx)(N,{image:t},t.id)}))}),e.length&&e.length<c&&Object(n.jsx)(v,{onClick:this.onButtonMoreClick})]})):Object(n.jsx)(n.Fragment,{}))}}]),a}(r.Component),F=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={searchQuery:"",showPopup:!1,targetImage:null},t.onSubmit=function(e){t.setState({searchQuery:e})},t.toggleModal=function(e){var a=e.status,n=e.src,r=e.alt;a?t.setState({targetImage:{src:n,alt:r},showPopup:!0}):t.setState({targetImage:null,showPopup:!1})},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this.state,e=t.showPopup,a=t.targetImage,r=t.searchQuery;return Object(n.jsxs)("div",{children:[Object(n.jsx)(g.a,{autoClose:3e3}),Object(n.jsx)(m,{onSubmit:this.onSubmit}),Object(n.jsx)(B,{searchQuery:r,toggleModal:this.toggleModal}),e&&Object(n.jsx)(p,{src:a.src,alt:a.alt,toggleModal:this.toggleModal})]})}}]),a}(r.Component);o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(F,{})}),document.querySelector("#root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.6cd2e46d.chunk.js.map
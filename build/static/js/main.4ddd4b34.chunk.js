(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{34:function(t,e,a){},76:function(t,e,a){"use strict";a.r(e);var n=a(1),c=a(0),r=a.n(c),o=a(5),s=a.n(o),u=(a(32),a(33),a(34),a(4));function i(t){var e=t.onSubmit,a=Object(c.useState)(""),r=Object(u.a)(a,2),o=r[0],s=r[1];return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{className:"SearchForm",onSubmit:function(t){t.preventDefault(),""!==o.trim()&&e(o)},children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(n.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0438 \u0444\u043e\u0442\u043e",value:o,onChange:function(t){s(t.target.value)}})]})})}function l(t){var e=t.src,a=t.alt,r=t.toggleModal;Object(c.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}}));var o=function(t){"Escape"!==t.key&&t.target!==t.currentTarget||r({status:!1})};return Object(n.jsx)("div",{className:"Overlay",onClick:o,children:Object(n.jsx)("div",{className:"Modal",children:Object(n.jsx)("img",{src:e,alt:a})})})}var j=a(7),b=a(11),m=a(20),O=a(21),d=a(26),f=a(25),h=(a(35),a(22)),g=a.n(h),p=function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(){return Object(m.a)(this,a),e.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){return Object(n.jsx)(g.a,{className:"loader",type:"Circles",color:"#3f51b5",height:80,width:80,timeout:3e3})}}]),a}(c.Component);function v(t){var e=t.onClick;return Object(n.jsx)("div",{className:"Button_container",children:Object(n.jsx)("button",{className:"Button Button_loadmore",type:"button",onClick:e,children:"Load more"})})}var x=a(10),y=a.n(x),S=a(23),w=a(24),k=a.n(w),N="19023232-35be833f55f428d8b0eb36710";function C(){return(C=Object(S.a)(y.a.mark((function t(e,a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",k.a.get("https://pixabay.com/api/?q=".concat(e,"&page=").concat(a,"&key=").concat(N,"&image_type=photo&orientation=horizontal&per_page=15")).then((function(t){return 200===t.status?t.data:Promise.reject(new Error("Images are not found."))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t){var e=t.image;return Object(n.jsx)("li",{className:"ImageGalleryItem",children:Object(n.jsx)("img",{src:e.webformatURL,alt:e.tags,"data-imageurl":e.largeImageURL,className:"ImageGalleryItem-image"})})}var E="idle",F="pending",M="resolved",L="rejected";function _(t){var e=t.searchQuery,a=t.toggleModal,r=Object(c.useState)([]),o=Object(u.a)(r,2),s=o[0],i=o[1],l=Object(c.useState)(0),m=Object(u.a)(l,2),O=m[0],d=m[1],f=Object(c.useState)(1),h=Object(u.a)(f,2),g=h[0],x=h[1],y=Object(c.useState)(null),S=Object(u.a)(y,2),w=S[0],k=S[1],N=Object(c.useState)(!1),_=Object(u.a)(N,2),B=_[0],G=_[1],T=Object(c.useState)(E),q=Object(u.a)(T,2),H=q[0],J=q[1];Object(c.useEffect)((function(){e&&(J(F),i([]),R())}),[e]),Object(c.useEffect)((function(){1!==g&&(J(F),R())}),[g]),Object(c.useEffect)((function(){Q()}),[s.length]);var Q=function(){O>s.length?G(!0):G(!1)};function R(){(function(t,e){return C.apply(this,arguments)})(e,g).then((function(t){var e=t.totalHits,a=t.hits;1===g?(d(e),i(a),J(M)):(i((function(t){return[].concat(Object(b.a)(t),Object(b.a)(a))})),J(M),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}))})).catch((function(t){k(t),J(L)})).finally((function(){J(E)}))}return H===F?Object(n.jsx)(p,{}):(H===L&&j.b.error(w.message,{toastId:"id"}),H===M||H===E?(s.length||H===E||j.b.info("\u041d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043f\u043e \u0412\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443",{toastId:"newId"}),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("ul",{className:"ImageGallery",onClick:function(t){t.target!==t.currentTarget&&a({status:!0,src:t.target.dataset.imageurl,alt:t.target.alt})},children:s.map((function(t){return Object(n.jsx)(I,{image:t},t.id)}))}),B&&Object(n.jsx)(v,{onClick:function(){return x((function(t){return t+1}))}})]})):Object(n.jsx)(n.Fragment,{}))}function B(){var t=Object(c.useState)(""),e=Object(u.a)(t,2),a=e[0],r=e[1],o=Object(c.useState)(!1),s=Object(u.a)(o,2),b=s[0],m=s[1],O=Object(c.useState)(null),d=Object(u.a)(O,2),f=d[0],h=d[1],g=function(t){var e=t.status,a=t.src,n=t.alt;e?(h({src:a,alt:n}),m(!0)):(h(null),m(!1))};return Object(n.jsxs)("div",{children:[Object(n.jsx)(j.a,{autoClose:3e3}),Object(n.jsx)(i,{onSubmit:function(t){r(t)}}),Object(n.jsx)(_,{searchQuery:a,toggleModal:g}),b&&Object(n.jsx)(l,{src:f.src,alt:f.alt,toggleModal:g})]})}s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(B,{})}),document.querySelector("#root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.4ddd4b34.chunk.js.map